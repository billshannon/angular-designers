<div layout="row" layout-align="center start">
    <div flex-gt-sm="80" flex-sm="90" layout-fill>

        <md-card>
            <md-card-content ng-controller="MainCtrl as ctrl">
                <md-input-container class="md-block">
                    <label>Search Items</label>
                    <input ng-model="q">
                </md-input-container>

                <div layout="row">
                    <div flex="50">
                        <h3>Items</h3>
                        <md-list>
                            <md-list-item class="md-2-line"
                                          ng-class-even="'even'" ng-class-odd="'odd'"
                                          ng-class="{'active':ctrl.currentItem.id == item.id}"
                                          ng-click="ctrl.setCurrentItem(item)"
                                          ng-repeat="item in ctrl.items | filter:{label:q}">
                                <img ng-src="{{item.avatar}}?{{$index}}" class="md-avatar" alt="{{item.label}}">
                                <div class="md-list-item-text">
                                    <h3>{{item.label}}</h3>
                                    <p>{{item.description}}</p>
                                    <p><strong>Price {{item.price | currency}} </strong></p>
                                </div>
                            </md-list-item>
                        </md-list>
                        <md-button ng-click="ctrl.setCurrentItem()">Clear</md-button>
                    </div>

                    <div flex="50" ng-if="ctrl.currentItem">
                        <md-card>
                            <md-card-content>
                                <md-whiteframe ng-mouseenter="ctrl.showDiscount()"
                                               ng-mouseleave="ctrl.removeDiscount()"

                                               class="md-whiteframe-5dp" flex="100"
                                               layout layout-align="center center">
                                    <strong>Rollover to see Discount</strong>
                                </md-whiteframe>
                                <md-whiteframe ng-if='ctrl.discountMessage' class="md-whiteframe-5dp" flex="100"
                                               layout layout-align="center center">
                                    <strong>{{ctrl.discountMessage}}</strong>
                                </md-whiteframe>


                            </md-card-content>
                        </md-card>

                        <md-card>
                            <md-card-content>
                                <md-whiteframe ng-if="ctrl.submittedMessage" class="md-whiteframe-5dp" flex="100"
                                               layout layout-align="center center">
                                    <strong>{{ctrl.submittedMessage}}</strong>
                                </md-whiteframe>

                                <form name="currentItemForm" ng-submit="ctrl.submitItem(ctrl.currentItem)">
                                    <md-input-container class="md-block">
                                        <label>Label</label>
                                        <input name="label"
                                               required ng-minlength="3" md-maxlength="10"
                                               ng-model="ctrl.currentItem.label">

                                        <div ng-messages="currentItemForm.label.$error" role="alert" multiple>
                                            <div ng-message='required' class="my-message">
                                                Label name is required!
                                            </div>
                                            <div ng-message='minlength' class="my-message">
                                                Label name is too short!
                                            </div>
                                            <div ng-message='md-maxlength' class="my-message">
                                                Label name is too long!
                                            </div>
                                        </div>
                                    </md-input-container>
                                </form>
                            </md-card-content>
                        </md-card>
                    </div>
                </div>
            </md-card-content>
        </md-card>
    </div>
</div>